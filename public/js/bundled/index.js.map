{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/mapbox.js","public/js/updateSettings.js","public/js/stripe.js"],"sourcesContent":["(function () {\nconst $1bad020d606674d1$var$hideAlert = ()=>{\n    const el = document.querySelector('.alert');\n    if (el) el.parentElement.removeChild(el);\n};\nconst $1bad020d606674d1$export$de026b00723010c1 = (type, msg)=>{\n    $1bad020d606674d1$var$hideAlert();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n    setTimeout($1bad020d606674d1$var$hideAlert, 5000);\n};\n\n\nconst $506a2b5b4c933da3$export$596d806903d1f59e = async (email, password)=>{\n    try {\n        console.log(email, password);\n        const res = await axios({\n            method: 'POST',\n            url: '/api/v1/users/login',\n            data: {\n                email: email,\n                password: password\n            }\n        });\n        if (res.data.status === 'success') {\n            (0, $1bad020d606674d1$export$de026b00723010c1)('success', 'Logged in successfully!');\n            setTimeout(()=>{\n                location.assign('/');\n            }, 1500);\n        }\n    } catch (err) {\n        (0, $1bad020d606674d1$export$de026b00723010c1)('error', err.response.data.message);\n    }\n};\nconst $506a2b5b4c933da3$export$a0973bcfe11b05c9 = async ()=>{\n    try {\n        const res = await axios({\n            method: 'GET',\n            url: '/api/v1/users/logout'\n        });\n        console.log(res.data);\n        if (res.data.status === 'success') location.assign('/');\n    } catch (err) {\n        (0, $1bad020d606674d1$export$de026b00723010c1)('error', 'Error logging out! Try again!');\n    }\n};\n\n\nconst $439717a3c770ee61$export$4c5dd147b21b9176 = (locations)=>{\n    const map = L.map('map', {\n        scrollWheelZoom: false,\n        doubleClickZoom: false\n    });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n    var greenIcon = L.icon({\n        iconUrl: '/img/pin.png',\n        iconSize: [\n            32,\n            40\n        ],\n        iconAnchor: [\n            16,\n            40\n        ],\n        popupAnchor: [\n            0,\n            -45\n        ]\n    });\n    const points = [];\n    locations.forEach((loc)=>{\n        points.push([\n            loc.coordinates[1],\n            loc.coordinates[0]\n        ]);\n        const marker = L.marker([\n            loc.coordinates[1],\n            loc.coordinates[0]\n        ], {\n            icon: greenIcon\n        }).addTo(map);\n        marker.bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\n            autoClose: false,\n            closeOnClick: false\n        }).openPopup();\n    });\n    const bounds = L.latLngBounds(points).pad(0.5);\n    map.fitBounds(bounds);\n};\n\n\n\nconst $6c985cc726fef2a4$export$f558026a994b6051 = async (data, type)=>{\n    try {\n        const res = await axios({\n            method: 'PATCH',\n            url: `/api/v1/users/${type === 'password' ? 'updatePassword' : 'updateMe'}`,\n            data: data\n        });\n        if (res.data.status === 'success') {\n            (0, $1bad020d606674d1$export$de026b00723010c1)('success', 'Data updated successfully!');\n            setTimeout(()=>{\n                location.reload(true);\n            }, 1000);\n        }\n    } catch (err) {\n        (0, $1bad020d606674d1$export$de026b00723010c1)('error', err.response.data.message);\n    }\n};\n\n\nvar $eee8b9e7125bf49d$export$8d5bdbf26681c0c2;\n\nvar $eee8b9e7125bf49d$require$showAlert = $1bad020d606674d1$export$de026b00723010c1;\n$eee8b9e7125bf49d$export$8d5bdbf26681c0c2 = async (tourId)=>{\n    try {\n        console.log(tourId);\n        const result = await axios({\n            method: 'GET',\n            url: `/api/v1/bookings/checkout-session/${tourId}`\n        });\n        console.log(result);\n        window.location.href = result.data.session.url;\n    } catch (err) {\n        $eee8b9e7125bf49d$require$showAlert('error', 'Error booking the tour! Please try again!');\n    }\n};\n\n\n// import 'core-js/stable';\n// import 'regenerator-runtime/runtime';\n// DOM ELEMENTS\nconst $f872f5529e0c2dec$var$locationsData = document.getElementById('serverData');\nconst $f872f5529e0c2dec$var$loginForm = document.querySelector('.form--login');\nconst $f872f5529e0c2dec$var$logoutBtn = document.querySelector('.nav__el--logout');\nconst $f872f5529e0c2dec$var$updateUserDataForm = document.querySelector('.form-user-data');\nconst $f872f5529e0c2dec$var$updateUserPasswordForm = document.querySelector('.form-user-settings');\nconst $f872f5529e0c2dec$var$bookTourBtn = document.querySelector('#book-tour');\nif ($f872f5529e0c2dec$var$locationsData) {\n    const locations = JSON.parse($f872f5529e0c2dec$var$locationsData.dataset.locations);\n    (0, $439717a3c770ee61$export$4c5dd147b21b9176)(locations);\n}\nif ($f872f5529e0c2dec$var$loginForm) $f872f5529e0c2dec$var$loginForm.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    (0, $506a2b5b4c933da3$export$596d806903d1f59e)(email, password);\n});\nif ($f872f5529e0c2dec$var$logoutBtn) $f872f5529e0c2dec$var$logoutBtn.addEventListener('click', (0, $506a2b5b4c933da3$export$a0973bcfe11b05c9));\nif ($f872f5529e0c2dec$var$updateUserDataForm) $f872f5529e0c2dec$var$updateUserDataForm.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    console.log(document.getElementById('photo')[0]);\n    form.append('email', document.getElementById('email').value);\n    form.append('name', document.getElementById('name').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n    for (const [key, value] of form.entries())console.log(key, value);\n    (0, $6c985cc726fef2a4$export$f558026a994b6051)(form, 'data');\n});\nif ($f872f5529e0c2dec$var$updateUserPasswordForm) $f872f5529e0c2dec$var$updateUserPasswordForm.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    const password = document.getElementById('password-current').value;\n    const newPassword = document.getElementById('password').value;\n    const newPasswordConfirm = document.getElementById('password-confirm').value;\n    (0, $6c985cc726fef2a4$export$f558026a994b6051)({\n        password: password,\n        newPassword: newPassword,\n        newPasswordConfirm: newPasswordConfirm\n    }, 'password');\n});\nif ($f872f5529e0c2dec$var$bookTourBtn) $f872f5529e0c2dec$var$bookTourBtn.addEventListener('click', async (e)=>{\n    e.preventDefault();\n    await (0, $eee8b9e7125bf49d$export$8d5bdbf26681c0c2)(e.target.dataset.tourId);\n});\n\n})();\n//# sourceMappingURL=index.js.map\n","import { login, logout } from './login';\nimport { displayMap } from './mapbox';\nimport { updateSettings, updateUserData } from './updateSettings';\nimport { bookTour } from './stripe';\n\n// import 'core-js/stable';\n// import 'regenerator-runtime/runtime';\n\n// DOM ELEMENTS\nconst locationsData = document.getElementById('serverData');\nconst loginForm = document.querySelector('.form--login');\nconst logoutBtn = document.querySelector('.nav__el--logout');\nconst updateUserDataForm = document.querySelector('.form-user-data');\nconst updateUserPasswordForm = document.querySelector('.form-user-settings');\nconst bookTourBtn = document.querySelector('#book-tour');\n\nif (locationsData) {\n  const locations = JSON.parse(locationsData.dataset.locations);\n  displayMap(locations);\n}\n\nif (loginForm) {\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n}\n\nif (logoutBtn) {\n  logoutBtn.addEventListener('click', logout);\n}\n\nif (updateUserDataForm) {\n  updateUserDataForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const form = new FormData();\n    console.log(document.getElementById('photo')[0]);\n    form.append('email', document.getElementById('email').value);\n    form.append('name', document.getElementById('name').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n    for (const [key, value] of form.entries()) {\n      console.log(key, value);\n    }\n    updateSettings(form, 'data');\n  });\n}\n\nif (updateUserPasswordForm) {\n  updateUserPasswordForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const password = document.getElementById('password-current').value;\n    const newPassword = document.getElementById('password').value;\n    const newPasswordConfirm =\n      document.getElementById('password-confirm').value;\n    updateSettings({ password, newPassword, newPasswordConfirm }, 'password');\n  });\n}\n\nif (bookTourBtn) {\n  bookTourBtn.addEventListener('click', async (e) => {\n    e.preventDefault();\n    await bookTour(e.target.dataset.tourId);\n  });\n}\n","import { showAlert } from './alerts';\n\nexport const login = async (email, password) => {\n  try {\n    console.log(email, password);\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/login',\n      data: {\n        email,\n        password,\n      },\n    });\n\n    if (res.data.status === 'success') {\n      showAlert('success', 'Logged in successfully!');\n      setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    showAlert('error', err.response.data.message);\n  }\n};\n\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: '/api/v1/users/logout',\n    });\n\n    console.log(res.data);\n    if(res.data.status === 'success') location.assign('/');\n  } catch (err) {\n    showAlert('error', 'Error logging out! Try again!');\n  }\n};\n","const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n};\n\n//type is 'success' or 'error'\nexport const showAlert = (type, msg) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  setTimeout(hideAlert, 5000);\n};\n","export const displayMap = (locations) => {\n  const map = L.map('map', {\n    scrollWheelZoom: false,\n    doubleClickZoom: false,\n  });\n\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution:\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  }).addTo(map);\n\n  var greenIcon = L.icon({\n    iconUrl: '/img/pin.png',\n    iconSize: [32, 40],\n    iconAnchor: [16, 40],\n    popupAnchor: [0, -45],\n  });\n\n  const points = [];\n  locations.forEach((loc) => {\n    points.push([loc.coordinates[1], loc.coordinates[0]]);\n    const marker = L.marker([loc.coordinates[1], loc.coordinates[0]], {\n      icon: greenIcon,\n    }).addTo(map);\n\n    marker\n      .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\n        autoClose: false,\n        closeOnClick: false,\n      })\n      .openPopup();\n  });\n\n  const bounds = L.latLngBounds(points).pad(0.5);\n  map.fitBounds(bounds);\n};\n","import { showAlert } from './alerts';\n\n// type is 'password' or 'data'\nexport const updateSettings = async (data, type) => {\n  try {\n    const res = await axios({\n      method: 'PATCH',\n      url: `/api/v1/users/${type === 'password' ? 'updatePassword' : 'updateMe'}`,\n      data,\n    });\n    if (res.data.status === 'success') {\n      showAlert('success', 'Data updated successfully!');\n      setTimeout(() => {\n        location.reload(true);\n      }, 1000);\n    }\n  } catch (err) {\n    showAlert('error', err.response.data.message);\n  }\n};\n","const { showAlert } = require('./alerts');\n\nexports.bookTour = async (tourId) => {\n  try {\n    console.log(tourId);\n    const result = await axios({\n      method: 'GET',\n      url: `/api/v1/bookings/checkout-session/${tourId}`,\n    });\n    console.log(result);\n    window.location.href = result.data.session.url;\n  } catch (err) {\n    showAlert('error', 'Error booking the tour! Please try again!');\n  }\n};\n"],"names":["$eee8b9e7125bf49d$export$8d5bdbf26681c0c2","$1bad020d606674d1$var$hideAlert","el","document","querySelector","parentElement","removeChild","$1bad020d606674d1$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","setTimeout","$506a2b5b4c933da3$export$596d806903d1f59e","email","password","console","log","res","axios","method","url","data","status","location","assign","err","response","message","$506a2b5b4c933da3$export$a0973bcfe11b05c9","$6c985cc726fef2a4$export$f558026a994b6051","reload","tourId","result","window","href","session","$eee8b9e7125bf49d$require$showAlert","$f872f5529e0c2dec$var$locationsData","getElementById","$f872f5529e0c2dec$var$loginForm","$f872f5529e0c2dec$var$logoutBtn","$f872f5529e0c2dec$var$updateUserDataForm","$f872f5529e0c2dec$var$updateUserPasswordForm","$f872f5529e0c2dec$var$bookTourBtn","locations","map","L","scrollWheelZoom","doubleClickZoom","tileLayer","attribution","addTo","greenIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","points","forEach","loc","push","coordinates","marker","bindPopup","day","description","autoClose","closeOnClick","openPopup","bounds","latLngBounds","pad","fitBounds","JSON","parse","dataset","addEventListener","e","preventDefault","value","form","FormData","key","append","files","entries","newPassword","newPasswordConfirm","target"],"version":3,"file":"index.js.map"}